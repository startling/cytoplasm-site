<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <title> Cytoplasm </title>
    <link rel="stylesheet" href="/style.css" type="text/css">
    <link rel="stylesheet" href="/autumn.css" type="text/css">
    <link rel="alternate" href="/blog/atom.xml" type="application/atom+xml" title="Atom feed for the blog">

<body>
    <header>
        <img class="logo" src="/logo.png" alt="Cytoplasm logo">
        <img class="banner" src="/banner.png" alt="Cytoplasm">
        <p> A new static site and blog compiler.</p>
    </header>
    
<h1 id="interpreters">Interpreters:</h1>
<p>These are all the interpreters known to man. Let me know if you have another one. Just add them to your <code>_config.py</code> if you want.</p>
<div class="toc">
<ul>
<li><a href="#interpreters">Interpreters:</a><ul>
<li><a href="#mako">Mako</a></li>
<li><a href="#scss">scss</a></li>
<li><a href="#haml">Haml.</a></li>
<li><a href="#markdown">Markdown</a></li>
</ul>
</li>
</ul>
</div>
<h2 id="mako">Mako</h2>
<p>This is probably in your <code>cytoplasm.defaults</code>, but it can be helpful to look at:</p>
<div class="codehilite"><pre><span class="kn">import</span> <span class="nn">mako.lookup</span><span class="o">,</span> <span class="nn">mako.template</span>
<span class="c"># Mako should look for templates to include in the current directory.</span>
<span class="c"># This should let you include things like &quot;_templates/site.mako&quot;</span>
<span class="n">mako_lookup</span> <span class="o">=</span> <span class="n">mako</span><span class="o">.</span><span class="n">lookup</span><span class="o">.</span><span class="n">TemplateLookup</span><span class="p">(</span><span class="n">directories</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;.&#39;</span><span class="p">])</span>

<span class="nd">@Interpreter</span><span class="p">(</span><span class="s">&quot;mako&quot;</span><span class="p">)</span>
<span class="c"># Mako doesn&#39;t come with an easy built-in way to save the output to </span>
<span class="c"># a certain file; this decorator does that.</span>
<span class="nd">@SaveReturned</span>
<span class="k">def</span> <span class="nf">mako_interpreter</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="c"># pass kwargs to the mako template</span>
    <span class="n">page</span> <span class="o">=</span> <span class="n">mako</span><span class="o">.</span><span class="n">template</span><span class="o">.</span><span class="n">Template</span><span class="p">(</span><span class="nb">file</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span> <span class="n">lookup</span><span class="o">=</span><span class="n">mako_lookup</span><span class="p">,</span> 
        <span class="n">input_encoding</span><span class="o">=</span><span class="s">&#39;utf-8&#39;</span><span class="p">)</span>
    <span class="c"># this is dumb but it&#39;s the only way I can make it work.</span>
    <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="o">.</span><span class="n">major</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="c"># if it&#39;s python 2, use .encode(&#39;utf-8&#39;, &#39;replace&#39;)</span>
        <span class="k">return</span> <span class="n">page</span><span class="o">.</span><span class="n">render_unicode</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">&#39;utf-8&#39;</span><span class="p">,</span> 
            <span class="s">&#39;replace&#39;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="o">.</span><span class="n">major</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="c"># otherwise, just render it...</span>
        <span class="k">return</span> <span class="n">page</span><span class="o">.</span><span class="n">render_unicode</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>


<h2 id="scss">scss</h2>
<div class="codehilite"><pre><span class="kn">from</span> <span class="nn">scss</span> <span class="kn">import</span> <span class="n">parser</span> <span class="k">as</span> <span class="n">scss_parser</span>

<span class="nd">@Interpreter</span><span class="p">(</span><span class="s">&quot;scss&quot;</span><span class="p">)</span>
<span class="nd">@SaveReturned</span>
<span class="k">def</span> <span class="nf">scss_interpreter</span><span class="p">(</span><span class="nb">file</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">scss_parser</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">file</span><span class="p">)</span>
</pre></div>


<p>I should probably note here that SCSS doesn't install on Python 3. So uh, don't use it if you expect to use Python 3.</p>
<h2 id="haml">Haml.</h2>
<p>A Haml interpreter using <a href="https://github.com/mikeboers/PyHAML">PyHaml</a>. You know, you can use this for templates, instead of Mako. Something like <code>post.haml</code>. Or whatever.</p>
<p>PyHaml doesn't work with Python 3 either, though.</p>
<div class="codehilite"><pre><span class="c"># A PyHaml Interpreter.</span>
<span class="c"># PyHaml is a preprocessor for mako, so a lot of this</span>
<span class="c"># is the same as it was there.</span>
<span class="kn">import</span> <span class="nn">haml</span>

<span class="nd">@Interpreter</span><span class="p">(</span><span class="s">&quot;haml&quot;</span><span class="p">)</span>
<span class="nd">@SaveReturned</span>
<span class="k">def</span> <span class="nf">pyhaml_interpreter</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">page</span> <span class="o">=</span> <span class="n">mako</span><span class="o">.</span><span class="n">template</span><span class="o">.</span><span class="n">Template</span><span class="p">(</span><span class="nb">file</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span> <span class="n">lookup</span><span class="o">=</span><span class="n">mako_lookup</span><span class="p">,</span>
        <span class="n">input_encoding</span><span class="o">=</span><span class="s">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">preprocessor</span><span class="o">=</span><span class="n">haml</span><span class="o">.</span><span class="n">preprocessor</span><span class="p">)</span>
    <span class="c"># this is dumb but it&#39;s the only way I can make it work.</span>
    <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="o">.</span><span class="n">major</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="c"># if it&#39;s python 2, use .encode(&#39;utf-8&#39;, &#39;replace&#39;)</span>
        <span class="k">return</span> <span class="n">page</span><span class="o">.</span><span class="n">render_unicode</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
            <span class="s">&#39;utf-8&#39;</span><span class="p">,</span> <span class="s">&#39;replace&#39;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="o">.</span><span class="n">major</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
        <span class="c"># otherwise, just render it...</span>
        <span class="k">return</span> <span class="n">page</span><span class="o">.</span><span class="n">render_unicode</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>


<h2 id="markdown">Markdown</h2>
<p>This probably came with your site... still:</p>
<div class="codehilite"><pre><span class="kn">import</span> <span class="nn">markdown</span>
<span class="n">markdown_extensions</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;abbr&#39;</span><span class="p">,</span> <span class="s">&#39;footnotes&#39;</span><span class="p">,</span> <span class="s">&#39;toc&#39;</span><span class="p">,</span> <span class="s">&#39;fenced_code&#39;</span><span class="p">,</span> 
    <span class="s">&#39;headerid&#39;</span><span class="p">,</span> <span class="s">&#39;codehilite&#39;</span><span class="p">]</span>

<span class="nd">@Interpreter</span><span class="p">(</span><span class="s">&quot;markdown&quot;</span><span class="p">,</span> <span class="s">&quot;md&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">markdown_interpreter</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">destination</span><span class="p">):</span>
    <span class="n">markdown</span><span class="o">.</span><span class="n">markdownFromFile</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="nb">file</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="n">destination</span><span class="p">,</span>
        <span class="n">extensions</span> <span class="o">=</span> <span class="n">markdown_extensions</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s">&quot;utf8&quot;</span><span class="p">,</span> 
        <span class="n">safe</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>


<p>Still here? Are you looking for something in particular? Well, interpreters are <a href="/controllers_and_interpreters.html#interpreters">really easy to write</a>...</p>

</body>
</html>

